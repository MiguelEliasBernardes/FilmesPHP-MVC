<?php 
    namespace App\Controller;;
    use App\Model;
    use App\Model\Movie;

    $total_estrelas = 5;
    $nota = 3.5;

?>



<!DOCTYPE html>
<html lang="pt-br">
<?php require "header.php";?>
<body class="bg-(--gray-100) h-screen">
    
    <header class="flex justify-between text-(--gray-500) px-4 py-2 items-center border-b-1 border-(--gray-300)">
        <img src="assets/Vector/Logo.svg" alt="Logo" class="w-14 mr-20">

        <nav>
            <ul  class="flex justify-center items-center gap-6 font-(family-name:--nunito) font-light">
                <li class="">
                    <a href="index.php?route=explore" class="flex items-center ">
                        <svg class="mr-2" width="20" height="20" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M35.8625 11.5953C35.7157 11.4573 35.5378 11.3568 35.3438 11.3024C35.1498 11.2479 34.9456 11.2412 34.7484 11.2828C34.5057 10.4102 34.093 9.59424 33.534 8.88169C32.9749 8.16914 32.2806 7.57406 31.4909 7.13065C30.7012 6.68723 29.8317 6.40421 28.9323 6.29786C28.0329 6.1915 27.1213 6.2639 26.25 6.51089C25.7016 5.31412 24.8211 4.29997 23.7131 3.58897C22.6052 2.87796 21.3164 2.5 20 2.5C18.6836 2.5 17.3948 2.87796 16.2869 3.58897C15.1789 4.29997 14.2984 5.31412 13.75 6.51089C12.8789 6.26358 11.9675 6.1908 11.0681 6.29674C10.1688 6.40268 9.29922 6.68525 8.5094 7.12822C7.71958 7.57118 7.02505 8.16582 6.4657 8.87798C5.90636 9.59014 5.49321 10.4058 5.25 11.2781C5.04466 11.2359 4.83202 11.2461 4.63164 11.3077C4.43126 11.3692 4.24958 11.4802 4.10331 11.6304C3.95705 11.7805 3.85089 11.965 3.79461 12.167C3.73833 12.3689 3.73374 12.5817 3.78125 12.7859L8.55625 33.0734C8.68551 33.6219 8.99628 34.1106 9.43816 34.4603C9.88004 34.81 10.4271 35.0002 10.9906 35H29.0094C29.5729 35.0002 30.12 34.81 30.5618 34.4603C31.0037 34.1106 31.3145 33.6219 31.4437 33.0734L36.2172 12.7859C36.267 12.5737 36.2604 12.3522 36.1982 12.1434C36.136 11.9345 36.0203 11.7456 35.8625 11.5953ZM11.875 8.74995C12.5894 8.74796 13.2932 8.92296 13.9234 9.25933C14.0936 9.34958 14.2823 9.39929 14.4748 9.40459C14.6674 9.40988 14.8585 9.3706 15.0334 9.28983C15.2082 9.20906 15.362 9.08898 15.4828 8.93895C15.6036 8.78893 15.6881 8.61302 15.7297 8.42495C15.9461 7.45374 16.487 6.58529 17.2634 5.96289C18.0397 5.34048 19.005 5.0013 20 5.0013C20.995 5.0013 21.9603 5.34048 22.7367 5.96289C23.513 6.58529 24.0539 7.45374 24.2703 8.42495C24.3119 8.61302 24.3964 8.78893 24.5172 8.93895C24.638 9.08898 24.7918 9.20906 24.9666 9.28983C25.1415 9.3706 25.3326 9.40988 25.5252 9.40459C25.7177 9.39929 25.9064 9.34958 26.0766 9.25933C26.6552 8.95241 27.2953 8.77932 27.9497 8.75283C28.6042 8.72634 29.2562 8.84712 29.8577 9.10626C30.4592 9.3654 30.9949 9.7563 31.4252 10.2501C31.8554 10.7439 32.1694 11.328 32.3437 11.9593L26.3187 13.6781L20.9297 11.5218C20.3339 11.2836 19.6693 11.2836 19.0734 11.5218L13.6828 13.6812L7.65625 11.9593C7.91136 11.0364 8.46219 10.2227 9.22424 9.64299C9.9863 9.06326 10.9175 8.74954 11.875 8.74995ZM10.9906 32.5L6.70469 14.2875L12.6188 15.9765L14.8219 32.5H10.9906ZM22.6562 32.5H17.3438L15.1172 15.8L20 13.8468L24.8828 15.8L22.6562 32.5ZM29.0094 32.5H25.1781L27.3813 15.9765L33.2953 14.2875L29.0094 32.5Z" fill="#7A7B9F"/>
                        </svg>
                        Explorar
                    </a>
                    </li>
                <li class="">
                    <a href="#" class="flex items-center">
                        <svg class="mr-2" width="20" height="20" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M33.75 16.2501H15.9515L32.8125 11.7985C32.9721 11.7565 33.1218 11.6832 33.2529 11.583C33.3841 11.4828 33.4941 11.3576 33.5766 11.2147C33.6591 11.0717 33.7125 10.9139 33.7337 10.7502C33.7548 10.5865 33.7434 10.4202 33.7 10.261L32.425 5.57351C32.2495 4.94287 31.8326 4.40674 31.2647 4.08124C30.6968 3.75574 30.0235 3.66708 29.3906 3.83445L5.5953 10.1157C5.27847 10.1979 4.98123 10.3426 4.72098 10.5411C4.46073 10.7396 4.24271 10.9881 4.07967 11.272C3.91572 11.5523 3.8098 11.8628 3.7682 12.1849C3.72659 12.507 3.75015 12.8341 3.83748 13.147L4.99998 17.4313C4.99998 17.4532 4.99998 17.4766 4.99998 17.5001V31.2501C4.99998 31.9131 5.26338 32.549 5.73222 33.0178C6.20106 33.4867 6.83694 33.7501 7.49998 33.7501H32.5C33.163 33.7501 33.7989 33.4867 34.2678 33.0178C34.7366 32.549 35 31.9131 35 31.2501V17.5001C35 17.1686 34.8683 16.8506 34.6339 16.6162C34.3994 16.3818 34.0815 16.2501 33.75 16.2501ZM30.025 6.25008L30.9625 9.69851L27.4281 10.636L23.0344 8.09851L30.025 6.25008ZM19.6047 9.00008L23.9984 11.5376L18.2265 13.061L13.8328 10.5266L19.6047 9.00008ZM7.19842 15.972L6.26092 12.522L10.4015 11.4282L14.7953 13.9688L7.19842 15.972ZM32.5 31.2501H7.49998V18.7501H32.5V31.2501Z" fill="#7A7B9F"/>
                        </svg>
                        Meus Filmes
                    </a>
                </li>
            </ul>
        </nav>

        <div class="flex gap-4 items-center">
            <p class="font-(family-name:--nunito) font-light">Ol√°, <?= $_SESSION['user']['name'] ?></p>
            <img src="assets/Vector/Logo.svg" alt="Profile Pic" class="w-8 rounded-sm border-(--purple-light)">
            <img src="assets/icon/SignOut-Regular.svg" alt="Exit Button" class="w-7 bg-(--gray-300) p-1 rounded-md">
        </div>
    </header>

    <main class="flex items-center flex-col h-full">

        <section class=" w-3/4 h-full flex items-center gap-10 text-(--gray-600) font-(family-name:--nunito)">
            <img src="<?= $movie['image'] ?>" alt="movie picture" class="h-4/5 rounded-lg shadow-[0px_0px_9px_0px_#892CCD]">

            <div class="h-4/5 flex flex-col gap-5">
                <a href="" class="flex gap-2 items-center">
                    <svg width="20" height="20" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M35 20C35 20.3315 34.8683 20.6494 34.6339 20.8838C34.3995 21.1183 34.0815 21.25 33.75 21.25H9.26719L18.3844 30.3656C18.5005 30.4817 18.5926 30.6196 18.6555 30.7713C18.7184 30.9231 18.7507 31.0857 18.7507 31.25C18.7507 31.4142 18.7184 31.5768 18.6555 31.7286C18.5926 31.8803 18.5005 32.0182 18.3844 32.1343C18.2682 32.2505 18.1304 32.3426 17.9786 32.4055C17.8269 32.4683 17.6643 32.5007 17.5 32.5007C17.3358 32.5007 17.1731 32.4683 17.0214 32.4055C16.8696 32.3426 16.7318 32.2505 16.6156 32.1343L5.36563 20.8843C5.24941 20.7682 5.15721 20.6304 5.09431 20.4786C5.0314 20.3269 4.99902 20.1642 4.99902 20C4.99902 19.8357 5.0314 19.673 5.09431 19.5213C5.15721 19.3695 5.24941 19.2317 5.36563 19.1156L16.6156 7.86559C16.8502 7.63104 17.1683 7.49927 17.5 7.49927C17.8317 7.49927 18.1498 7.63104 18.3844 7.86559C18.6189 8.10014 18.7507 8.41826 18.7507 8.74996C18.7507 9.08167 18.6189 9.39979 18.3844 9.63434L9.26719 18.75H33.75C34.0815 18.75 34.3995 18.8817 34.6339 19.1161C34.8683 19.3505 35 19.6684 35 20Z" fill="white"/>
                    </svg>
                    Voltar
                </a>

                <h2 class="text-(--gray-700) font-(family-name:--rajd) text-3xl font-bold tracking-wide"><?= $movie['name'] ?></h2>

                <div>
                    <p><span class="font-bold">Categoria:</span> <?= $movie['category'] ?></p>
                    <p><span class="font-bold">Ano:</span> <?= $movie['year'] ?></p>
                </div>

                <div class="flex space-y-2 items-center">
                    <?php
                        for ($i = 1; $i <= $total_estrelas; $i++):
                            $tipo = 'vazia';
                            if ($nota >= $i) {
                                $tipo = 'cheia';
                            } elseif ($nota >= ($i - 0.5)) {
                                $tipo = 'meia';
                            }

                            $id_gradient = "half-fill-$i";
                            $fill = match ($tipo) {
                                'cheia' => '#A85FDD',
                                'vazia' => 'none',
                                'meia'  => "url(#$id_gradient)",
                            };
                        ?>
                        <svg width="25" height="25" viewBox="0 0 40 40" fill="none" class="mx-0.5 mt-1" xmlns="http://www.w3.org/2000/svg">
                            <?php if ($tipo === 'meia'): ?>
                                <defs>
                                    <linearGradient id="<?= $id_gradient ?>" x1="0" x2="100%" y1="0" y2="0">
                                        <stop offset="50%" stop-color="#A85FDD"/>
                                        <stop offset="50%" stop-color="transparent"/>
                                    </linearGradient>
                                </defs>
                            <?php endif; ?>
                            <path d="M37.3719 15.1969C37.2156 14.7165 36.9206 14.293 36.5241 13.98C36.1276 13.6669 35.6473 13.4781 35.1437 13.4375L25.925 12.6938L22.3656 4.08596C22.1731 3.61693 21.8455 3.21573 21.4244 2.93337C21.0033 2.65101 20.5078 2.50024 20.0008 2.50024C19.4938 2.50024 18.9982 2.65101 18.5771 2.93337C18.156 3.21573 17.8284 3.61693 17.6359 4.08596L14.0797 12.6922L4.85623 13.4375C4.35182 13.4802 3.87122 13.6708 3.47463 13.9853C3.07804 14.2999 2.78312 14.7246 2.6268 15.2061C2.47048 15.6875 2.45972 16.2044 2.59587 16.692C2.73202 17.1795 3.00902 17.6161 3.39217 17.9469L10.4234 24.0141L8.28123 33.086C8.16143 33.5788 8.19076 34.0962 8.36551 34.5723C8.54026 35.0485 8.85255 35.462 9.26273 35.7603C9.67291 36.0586 10.1625 36.2284 10.6693 36.248C11.1761 36.2676 11.6774 36.1361 12.1094 35.8703L20 31.0141L27.8953 35.8703C28.3274 36.133 28.8276 36.2619 29.3329 36.2408C29.8382 36.2198 30.3259 36.0497 30.7347 35.752C31.1435 35.4543 31.455 35.0423 31.6301 34.5679C31.8052 34.0935 31.8361 33.5779 31.7187 33.086L29.5687 24.0125L36.6 17.9453C36.9862 17.6151 37.2658 17.1776 37.4032 16.6883C37.5406 16.199 37.5297 15.68 37.3719 15.1969Z" fill="<?= $fill ?>" stroke="#A85FDD" stroke-width="1"/>
                        </svg>
                    <?php endfor; ?>

                    <p class="ml-2 text-(--gray-700) font-(family-name:--rajd) text-3xl font-bold">4 <span class="text-base font-light text-(--gray-600) font-(family-name:--nunito)">( 5 avalia√ß√µes )</span></p>
                </div>

                <p class="mt-10 text-lg">
                    <?= $movie['description'] ?>
                </p>
            </div>
        </section>

        <section class="w-3/4">
            <div class="flex justify-between items-center">
                <h2 class="text-(--gray-700) font-(family-name:--rajd) text-2xl font-bold">Avalia√ß√µes</h2>

                <a href="" class="text-white bg-(--purple-base) font-(family-name:--nunito) flex items-center gap-3 px-6 py-4 rounded-lg">
                    <svg width="20" height="20" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M37.3719 15.1969C37.2156 14.7165 36.9206 14.293 36.5241 13.98C36.1276 13.6669 35.6473 13.4781 35.1437 13.4375L25.925 12.6938L22.3656 4.08596C22.1731 3.61693 21.8455 3.21573 21.4244 2.93337C21.0033 2.65101 20.5078 2.50024 20.0008 2.50024C19.4938 2.50024 18.9982 2.65101 18.5771 2.93337C18.156 3.21573 17.8284 3.61693 17.6359 4.08596L14.0797 12.6922L4.85623 13.4375C4.35182 13.4802 3.87122 13.6708 3.47463 13.9853C3.07804 14.2999 2.78312 14.7246 2.6268 15.2061C2.47048 15.6875 2.45972 16.2044 2.59587 16.692C2.73202 17.1795 3.00902 17.6161 3.39217 17.9469L10.4234 24.0141L8.28123 33.086C8.16143 33.5788 8.19076 34.0962 8.36551 34.5723C8.54026 35.0485 8.85255 35.462 9.26273 35.7603C9.67291 36.0586 10.1625 36.2284 10.6693 36.248C11.1761 36.2676 11.6774 36.1361 12.1094 35.8703L20 31.0141L27.8953 35.8703C28.3274 36.133 28.8276 36.2619 29.3329 36.2408C29.8382 36.2198 30.3259 36.0497 30.7347 35.752C31.1435 35.4543 31.455 35.0423 31.6301 34.5679C31.8052 34.0935 31.8361 33.5779 31.7187 33.086L29.5687 24.0125L36.6 17.9453C36.9862 17.6151 37.2658 17.1776 37.4032 16.6883C37.5406 16.199 37.5297 15.68 37.3719 15.1969ZM34.975 16.0516L27.3656 22.6141C27.1921 22.7637 27.063 22.9581 26.9924 23.176C26.9219 23.394 26.9126 23.6271 26.9656 23.85L29.2906 33.6625C29.2966 33.6761 29.2972 33.6914 29.2923 33.7053C29.2873 33.7193 29.2772 33.7308 29.264 33.7375C29.2359 33.7594 29.2281 33.7547 29.2047 33.7375L20.6547 28.4797C20.4578 28.3587 20.2311 28.2946 20 28.2946C19.7688 28.2946 19.5422 28.3587 19.3453 28.4797L10.7953 33.7407C10.7719 33.7547 10.7656 33.7594 10.7359 33.7407C10.7227 33.7339 10.7126 33.7224 10.7077 33.7085C10.7027 33.6945 10.7033 33.6792 10.7094 33.6657L13.0344 23.8532C13.0873 23.6303 13.0781 23.3971 13.0075 23.1791C12.937 22.9612 12.8079 22.7668 12.6344 22.6172L5.02498 16.0547C5.00623 16.0391 4.98905 16.025 5.00467 15.9766C5.0203 15.9282 5.0328 15.9344 5.05623 15.9313L15.0437 15.125C15.2728 15.1054 15.492 15.0229 15.6773 14.8867C15.8625 14.7506 16.0066 14.5659 16.0937 14.3532L19.9406 5.03909C19.9531 5.01253 19.9578 5.00003 19.9953 5.00003C20.0328 5.00003 20.0375 5.01253 20.05 5.03909L23.9062 14.3532C23.9942 14.566 24.1392 14.7505 24.3253 14.8861C24.5114 15.0218 24.7314 15.1034 24.9609 15.1219L34.9484 15.9282C34.9719 15.9282 34.9859 15.9282 35 15.9735C35.014 16.0188 35 16.036 34.975 16.0516Z" fill="white"/>
                    </svg>

                    Avaliar Filme
                </a>
            </div>

            <div>

            </div>
        </section>

    </main>